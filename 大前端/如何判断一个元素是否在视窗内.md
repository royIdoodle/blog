# 如何判断一个元素是否在视窗内

本文要总结的知识点：

* 判断元素是否在视窗内的用途
* 使用`Element.getBoundingClientRect()`判断
* 高阶方法——`IntersectionObserver()`
* `IntersectionObserver()`底层原理



## 判断元素是否在视窗内的用途

统计商品（或内容板块）曝光率，图片懒加载，列表页滚动加载。



##使用`Element.getBoundingClientRect()`判断

`Element.getBoundingClientRect()`方法返回的是的`left`、`right`、`top`、`bottom`的值都是相对于视窗的左上角的像素值。

![getBoundingClientRect示例图](https://mdn.mozillademos.org/files/15087/rect.png)

视窗的大小可以通过`window.innerHeight`和`window.innerWidth`来获得。

所以在屏幕内的条件就是

* `window.innerHeight - boundingClientRect.top  > 0 && boundingClientRect.top > 0`

所以要监听`document.onreszie`和 `document.onscroll`两个事件，这两个事件的回调都要进行判断